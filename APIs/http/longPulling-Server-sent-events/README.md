# Node.js Long Polling Example

This repository contains a basic implementation of **long polling** using vanilla Node.js, without the Express.js framework. It's designed for anyone who wants to understand the underlying mechanics of how long polling works by directly leveraging Node.js's built-in `http` module.

## Why Long Polling?

Long polling is a technique used to simulate real-time communication between a client and a server over standard HTTP. Unlike traditional short polling (where the client repeatedly asks the server for updates), long polling works by the server holding a client's request open until new data is available or a timeout occurs. Once data is sent (or the timeout is reached), the connection closes, and the client immediately initiates a new request.

This example is particularly useful for those who, like me (the creator), are **technology enthusiasts pursuing an M.Sc. in Computer Science and Engineering** and enjoy **understanding how tools function internally**. It demonstrates how to handle persistent connections and manage client requests at a lower level than what frameworks typically abstract away.

-----

### Features

  * **Vanilla Node.js `http` module:** No external web frameworks needed.
  * **TypeScript:** Type-safe and maintainable code.
  * **Basic Long Polling Logic:** Server holds client requests until new data is pushed or a timeout occurs.
  * **Simulated Data Push:** A dedicated endpoint to trigger new data availability.
  * **Client-Side Example:** A simple HTML/JavaScript client to demonstrate consumption.
  * **CORS Handling:** Basic CORS headers are included for local development.

-----

### Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

#### Prerequisites

Make sure you have the following installed:

  * **Node.js** (LTS recommended)
  * **npm** (comes with Node.js) or **Yarn**
  * **TypeScript** (`npm install -g typescript`)

#### Installation

1.  **Clone the repository:**

    ```bash
    git clone https://github.com/your-username/nodejs-long-polling-example.git
    cd nodejs-long-polling-example
    ```

2.  **Compile the TypeScript server:**

    ```bash
    tsc longPollingServer.ts
    ```

    This will generate `longPollingServer.js` in the same directory.

-----

### Usage

#### 1\. Start the Server

Navigate to the project directory in your terminal and run the compiled JavaScript file:

```bash
node longPollingServer.js
```

You should see output similar to this:

```
Server running at http://localhost:3000/
Call /poll to start long polling.
Call /send-data to simulate new data being available.
```

#### 2\. Open the Client

Open the `index.html` file in your web browser. You can simply drag and drop it into your browser, or use a tool like VS Code's "Live Server" extension for convenience.

Once opened, the client will immediately start making long polling requests to `http://localhost:3000/poll`. You'll see messages in your browser's console and on the page indicating the polling status (e.g., "Client connected for long polling").

#### 3\. Simulate New Data

To see the long polling in action, you need to trigger new data on the server. You have two ways to do this:

  * **Via the Client:** Click the "Trigger New Data (Server)" button on the `index.html` page. This will make a request to the server's `/send-data` endpoint.
  * **Manually:** Open a new browser tab or use a tool like `curl` and navigate to `http://localhost:3000/send-data`.

Upon triggering new data, you'll observe the following:

  * The server's console will log "New data available" and "Sent data to a client."
  * The client in your browser will instantly receive the new data, display it, and then automatically initiate another long polling request.

-----

### Project Structure

```tree
.
├── longPolling.ts   # The Node.js server implementation
├── longPolling.js   # Compiled JavaScript server (generated by tsc)
├── index.html             # The client-side HTML and JavaScript
├── tsconfig.json          # TypeScript configuration (optional, but good practice for larger projects)
└── README.md              # This file
```

-----

### Considerations for Production

While this example effectively demonstrates long polling concepts, for production environments, you'd typically consider:

  * **WebSockets:** For truly real-time, bidirectional communication, WebSockets are generally more efficient and performant than long polling. Libraries like `ws` or `socket.io` are common choices with Node.js.
  * **Server-Sent Events (SSE):** If you only need one-way communication from the server to the client (e.g., live feeds, notifications), SSE can be a simpler alternative to WebSockets.
  * **Scalability:** Managing a large number of open connections can be resource-intensive for the server. Solutions like load balancers and distributing connections across multiple server instances become crucial.
  * **Error Handling & Retries:** More robust error handling and retry mechanisms would be needed for a production-ready client.
  * **Authentication & Authorization:** Securing your endpoints.

-----

### Contributing

Feel free to fork this repository, experiment with it, and make improvements\! Pull requests are welcome.

-----

### License

This project is open-sourced under the MIT License. See the `LICENSE` file for details.

-----